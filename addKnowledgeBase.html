<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Knowledge Base Article - IT-HelpDesk</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css"
      rel="stylesheet"
    />
    <style>
      /* Pagination style - larger size */
      .pagination {
        margin: 20px 0;
        font-size: 16px;
      }

      .pagination a {
        margin: 0 10px;
        color: #4285f4;
        font-weight: 500;
        text-decoration: none;
      }

      .pagination a:hover {
        text-decoration: underline;
      }

      .action-buttons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }

      .action-btn {
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .edit-btn {
        background-color: #f1f1f1;
        color: #333;
        border: 1px solid #ddd;
      }

      .view-btn {
        background-color: #4285f4;
        color: white;
        border: none;
      }

      .view-btn:hover {
        background-color: #3367d6;
      }

      .edit-btn:hover {
        background-color: #e3e3e3;
      }
    </style>
  </head>
  <body>
    <!-- Header container -->
    <div id="header-container"></div>

    <!-- Sidebar container -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="content-header">
        <div class="d-flex justify-content-between align-items-center">
          <h1>Add Knowledge Base Article</h1>
          <div class="d-flex">
            <div class="filter-container me-3">
              <button id="filter-btn-kb" class="filter-btn">
                <i class="fa-solid fa-sliders"></i>

                <!-- Filter Modal -->
                <div class="filter-modal" id="filter-modal-kb">
                  <h3>Select Knowledge Category</h3>

                  <div class="filter-options">
                    <div class="filter-option">Hardware</div>
                    <div class="filter-option">Software</div>
                    <div class="filter-option">Network</div>
                    <div class="filter-option">Security</div>
                    <div class="filter-option">Show All</div>
                  </div>

                  <div class="filter-select">
                    <label for="filter-select-kb">Filter By :</label>
                    <select id="filter-select-kb">
                      <option value="">Select</option>
                      <option value="date">Date</option>
                      <option value="usage">Most Used</option>
                      <option value="relevance">Relevance</option>
                    </select>
                  </div>

                  <div class="filter-notes">
                    *You can choose multiple categories<br />
                    *You can sort by different criteria
                  </div>

                  <button class="filter-button">Apply Filter</button>
                </div>
              </button>
            </div>
            <a href="knowledgeBase.html" class="btn btn-outline-secondary">
              <i class="fas fa-arrow-left me-1"></i> Back to Knowledge Base
            </a>
          </div>
        </div>
        <p class="text-muted">
          Create a new article to help users solve common problems
        </p>
      </div>

      <div class="content-body">
        <!-- Example Pagination (for demonstration) -->
        <div class="pagination mb-4 text-center">
          <a href="#" class="fw-bold">first</a> |
          <a href="#" class="fw-bold">prev</a> |
          <a href="#" class="fw-bold">next</a> |
          <a href="#" class="fw-bold">last</a>
        </div>

        <!-- Example Action Buttons (for demonstration) -->
        <div class="row mb-4">
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5>Knowledge Base Example Item</h5>
                <p>
                  This demonstrates the larger action buttons as seen in the
                  reference image.
                </p>
                <div class="action-buttons">
                  <button class="action-btn edit-btn">
                    <i class="fas fa-pen"></i>
                  </button>
                  <button class="action-btn view-btn">View Details</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <form id="add-kb-form">
              <!-- Article Title -->
              <div class="mb-3">
                <label for="article-title" class="form-label"
                  >Article Title</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="article-title"
                  placeholder="Enter a descriptive title"
                  required
                />
              </div>

              <!-- Category and Tags -->
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="article-category" class="form-label"
                    >Category</label
                  >
                  <select class="form-select" id="article-category" required>
                    <option value="" selected disabled>
                      Select a category
                    </option>
                    <option value="hardware">Hardware & Devices</option>
                    <option value="software">Software</option>
                    <option value="network">Network & Internet</option>
                    <option value="security">Security</option>
                    <option value="email">Email & Communication</option>
                    <option value="policy">Policies & Procedures</option>
                    <option value="other">Other</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="article-tags" class="form-label">Tags</label>
                  <input
                    type="text"
                    class="form-control"
                    id="article-tags"
                    placeholder="Enter tags separated by commas"
                  />
                </div>
              </div>

              <!-- Article Content -->
              <div class="mb-3">
                <label for="article-content" class="form-label">Content</label>
                <div id="summernote"></div>
              </div>

              <!-- File Attachments -->
              <div class="mb-3">
                <label for="article-attachments" class="form-label"
                  >Attachments</label
                >
                <div class="input-group">
                  <input
                    type="file"
                    class="form-control"
                    id="article-attachments"
                    multiple
                  />
                  <button class="btn btn-outline-secondary" type="button">
                    <i class="fas fa-paperclip"></i>
                  </button>
                </div>
                <div class="form-text">
                  Max file size: 5MB. Allowed formats: PDF, DOCX, PNG, JPG
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="d-flex gap-2 mt-4">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-save me-1"></i> Save and Publish
                </button>
                <button type="button" class="btn btn-outline-secondary ms-auto">
                  <i class="fas fa-times me-1"></i> Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- WhatsApp Button -->
    <a href="#" class="whatsapp-btn" title="Contact us on WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
    <script src="utils.js"></script>
    <script>
      $(document).ready(function () {
        // Initialize Summernote editor
        $("#summernote").summernote({
          placeholder: "Write your article content here...",
          tabsize: 2,
          height: 300,
          toolbar: [
            ["style", ["style"]],
            ["font", ["bold", "underline", "clear"]],
            ["color", ["color"]],
            ["para", ["ul", "ol", "paragraph"]],
            ["table", ["table"]],
            ["insert", ["link", "picture"]],
            ["view", ["fullscreen", "codeview", "help"]],
          ],
        });

        // Filter Modal Toggle
        const filterBtn = document.getElementById("filter-btn-kb");
        const filterModal = document.getElementById("filter-modal-kb");

        if (filterBtn && filterModal) {
          filterBtn.addEventListener("click", function (e) {
            e.stopPropagation(); // Stop click from propagating to document
            filterModal.classList.toggle("active");
          });

          // Close the filter modal when clicking outside
          document.addEventListener("click", function (e) {
            if (!filterBtn.contains(e.target)) {
              filterModal.classList.remove("active");
            }
          });

          // Prevent clicks inside the filter modal from closing it
          filterModal.addEventListener("click", function (e) {
            e.stopPropagation();
          });

          // Handle filter options selection
          const filterOptions = filterModal.querySelectorAll(".filter-option");
          filterOptions.forEach((option) => {
            option.addEventListener("click", function () {
              // For "Show All" option, deselect all others when selected
              if (this.textContent === "Show All") {
                filterOptions.forEach((opt) => {
                  if (opt.textContent !== "Show All") {
                    opt.classList.remove("active");
                  }
                });
                this.classList.toggle("active");
              } else {
                // For other options, deselect "Show All" if it's active
                filterOptions.forEach((opt) => {
                  if (opt.textContent === "Show All") {
                    opt.classList.remove("active");
                  }
                });
                this.classList.toggle("active");
              }
            });
          });

          // Filter Button Action
          const filterButton = filterModal.querySelector(".filter-button");
          filterButton.addEventListener("click", function () {
            // Get selected categories
            const selectedCategories = [];
            filterOptions.forEach((option) => {
              if (option.classList.contains("active")) {
                selectedCategories.push(option.textContent);
              }
            });

            // Get selected "Filter By" value
            const filterByValue =
              document.getElementById("filter-select-kb").value;

            // Apply filters (this would normally filter actual content)
            console.log("Selected categories:", selectedCategories);
            console.log("Filter by:", filterByValue);

            // Close the modal
            filterModal.classList.remove("active");
          });
        }
      });
    </script>
  </body>
</html>
