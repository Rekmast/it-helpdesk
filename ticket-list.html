<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ticket List - IT-HelpDesk</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Header container -->
    <div id="header-container"></div>

    <!-- Sidebar container -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <div class="main-content">
      <h2 class="mb-4">Ticket List</h2>

      <div class="card">
        <div
          class="card-header d-flex justify-content-between align-items-center"
        >
          <h5 class="mb-0">All Tickets</h5>
          <div>
            <button class="btn btn-outline-secondary me-2">Export</button>
            <button
              class="btn btn-primary"
              onclick="window.location.href='newProblemTicket.html'"
            >
              <i class="fas fa-plus me-1"></i> Create Ticket
            </button>
          </div>
        </div>
        <div class="card-body">
          <div class="mb-3 d-flex justify-content-between">
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-outline-primary">All</button>
              <button class="btn btn-sm btn-outline-danger">Open</button>
              <button class="btn btn-sm btn-outline-warning">
                In Progress
              </button>
              <button class="btn btn-sm btn-outline-success">Solved</button>
              <button class="btn btn-sm btn-outline-secondary">Expired</button>
            </div>
            <div class="d-flex align-items-center gap-2">
              <div id="filter-btn-admin" class="filter-btn">
                <i class="fas fa-filter"></i> Filter
              </div>
              <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search tickets..." />
              </div>
            </div>
          </div>

          <!-- Filter Modal -->
          <div id="filter-modal-admin" class="filter-modal">
            <div class="filter-header">
              <h5>Select Ticket(s) Status</h5>
            </div>
            <div class="filter-options">
              <div class="filter-option">Open</div>
              <div class="filter-option">On Progress</div>
              <div class="filter-option">Expired</div>
              <div class="filter-option">Solved</div>
              <div class="filter-option">Show All</div>
            </div>
            <div class="filter-dropdown">
              <p>Show By:</p>
              <select id="filter-select-admin">
                <option value="date">Date</option>
                <option value="department">Department</option>
                <option value="priority">Priority</option>
              </select>
            </div>
            <div class="filter-note">
              <p>*You can select multiple ticket status</p>
            </div>
            <div class="filter-button">Select Now</div>
          </div>

          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Subject</th>
                  <th>Reported By</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>TIC001</td>
                  <td>Product Activation Failed</td>
                  <td>John Doe</td>
                  <td><span class="badge bg-danger">Open</span></td>
                  <td>03 Mar 2023</td>
                  <td>
                    <button
                      class="btn btn-sm btn-info"
                      onclick="window.location.href='viewDetail.html?id=TIC001&subject=Product Activation Failed&status=Open'"
                    >
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-warning">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>TIC002</td>
                  <td>MS Excel bermasalah</td>
                  <td>John Doe</td>
                  <td><span class="badge bg-warning">In Progress</span></td>
                  <td>02 Mar 2023</td>
                  <td>
                    <button
                      class="btn btn-sm btn-info"
                      onclick="window.location.href='viewDetail.html?id=TIC002&subject=MS Excel bermasalah&status=In Progress'"
                    >
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-warning">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>TIC003</td>
                  <td>Permohonan penembakan PB Built in weekend project</td>
                  <td>John Doe</td>
                  <td><span class="badge bg-success">Solved</span></td>
                  <td>01 Mar 2023</td>
                  <td>
                    <button
                      class="btn btn-sm btn-info"
                      onclick="window.location.href='viewDetail.html?id=TIC003&subject=Permohonan penembakan PB Built in weekend project&status=Solved'"
                    >
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-warning">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>TIC004</td>
                  <td>Reset Password Wifi dan Device Wifi Login</td>
                  <td>John Doe</td>
                  <td><span class="badge bg-secondary">Expired</span></td>
                  <td>28 Feb 2023</td>
                  <td>
                    <button
                      class="btn btn-sm btn-info"
                      onclick="window.location.href='viewDetail.html?id=TIC004&subject=Reset Password Wifi dan Device Wifi Login&status=Expired'"
                    >
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-warning">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger">
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="d-flex justify-content-between align-items-center mt-3">
            <div>Showing 1 to 4 of 4 entries</div>
            <div class="pagination">
              <a href="#">First</a> | <a href="#">Prev</a> |
              <a href="#">Next</a> | <a href="#">Last</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- WhatsApp Button -->
    <a href="#" class="whatsapp-btn" title="Contact us on WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="utils.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Admin filter modal toggle
        const filterBtn = document.getElementById("filter-btn-admin");
        const filterModal = document.getElementById("filter-modal-admin");

        if (filterBtn && filterModal) {
          filterBtn.addEventListener("click", function () {
            filterModal.classList.add("active");
            filterModal.classList.add("fade-in");
          });

          // Close modal when clicking outside
          document.addEventListener("click", function (e) {
            if (
              filterModal.classList.contains("active") &&
              !filterModal.contains(e.target) &&
              e.target !== filterBtn
            ) {
              filterModal.classList.remove("active");
              filterModal.classList.remove("fade-in");
            }
          });

          // Filter option selection
          const filterOptions = filterModal.querySelectorAll(".filter-option");
          filterOptions.forEach((option) => {
            option.addEventListener("click", function () {
              if (this.textContent === "Show All") {
                // If "Show All" is clicked, deselect all other options
                filterOptions.forEach((opt) => {
                  if (opt.textContent !== "Show All") {
                    opt.classList.remove("selected");
                  }
                });
                this.classList.add("selected");
              } else {
                // If any other option is clicked, deselect "Show All"
                filterOptions.forEach((opt) => {
                  if (opt.textContent === "Show All") {
                    opt.classList.remove("selected");
                  }
                });
                this.classList.toggle("selected");
              }
            });
          });

          // Filter button action
          const filterButton = filterModal.querySelector(".filter-button");
          filterButton.addEventListener("click", function () {
            const selectedOptions = [];
            filterOptions.forEach((option) => {
              if (
                option.classList.contains("selected") &&
                option.textContent !== "Show All"
              ) {
                selectedOptions.push(option.textContent);
              }
            });

            const showByValue = document.getElementById(
              "filter-select-admin"
            ).value;

            // Here you can implement the actual filtering logic
            console.log("Selected statuses:", selectedOptions);
            console.log("Show by:", showByValue);

            // Close the modal after filtering
            filterModal.classList.remove("active");
          });
        }
      });
    </script>
  </body>
</html>
